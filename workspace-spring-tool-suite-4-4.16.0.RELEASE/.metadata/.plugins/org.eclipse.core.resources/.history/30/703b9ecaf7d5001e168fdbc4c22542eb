package com.cg.springRestPrblms.springRestPrblms.Surveyquens;

import java.util.List;

import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class SurveyResource {
	private SurveyService service =new SurveyService();
	@RequestMapping("/surveys")
	public  List<Survey>   retrieveAllSurveys()
	{
	return service.retrieveAll();
	}
	@RequestMapping("/surveys/{surveyId}")
	public  Survey   retrievebySurveyId( @PathVariable String surveyId)
	{
	return service.retrievebySurveyID(surveyId);
	}
	@RequestMapping("/surveys/{surveyId}/questions")
	 public List<Question> retrieveQuestion(@PathVariable String surveyId)
		{
			return service.retreiveQuestion(surveyId);
		}
		//retrieve specific question-GET
		@RequestMapping("/surveys/{surveyId}/questions/{questionId}")
		public Question retreiveQuestionById(@PathVariable String surveyId, @PathVariable String questionId)
		{
			return service.retrievebyQuestionId(surveyId,questionId);
		}
		//add a question-POST
		@RequestMapping(value="/surveys/{surveyId}/questions", method=RequestMethod.POST)
		public void addSurveyQuestion(@PathVariable String surveyId,@RequestBody Question question)
		{
			service.addSurveyQuestion(surveyId, question);
		}
		//delete a question
		@RequestMapping(value="/surveys/{surveyId}/questions/{questionId}", method=RequestMethod.DELETE)
		public ResponseEntity<Object> deleteSpecficQuestion(@PathVariable String surveyId, @PathVariable String questionId)
		{
			service.deleteSurveyQuestion(surveyId, questionId);
			return ResponseEntity.noContent().build();
			}
		//update a question
		@RequestMapping(value="/surveys/{surveyId}/questions/{questionId}",method=RequestMethod.PUT)
		public void updateSurveyQuestion(@PathVariable String surveyId,@PathVariable String questionId,@RequestBody Question question)
		{
			service.updateSurveyQuestion(surveyId, questionId,question);
		}

		
	

}
